{"config":{"lang":["en"],"separator":"[\\s\\-,:!=\\[\\]()\"/]+|(?!\\b)(?=[A-Z][a-z])|\\.(?!\\d)|&[lg]t;","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":""},{"location":"#_1","title":"Home","text":""},{"location":"#agenthelm","title":"AgentHelm","text":"<p>Production-Ready Orchestration for AI Agents.</p> <p>AgentHelm is a lightweight Python framework for building AI agents with a focus on production-readiness. Built on DSPy, it provides the essential orchestration layer to make your agents observable, reliable, and safe.</p>"},{"location":"#why-agenthelm","title":"Why AgentHelm?","text":"<p>In the rapidly evolving world of AI agents, many frameworks focus on rapid prototyping. AgentHelm is different\u2014it's built for production environments where you need:</p> <ul> <li>\ud83d\udd0d Full observability of every tool call</li> <li>\ud83d\udee1\ufe0f Human-in-the-loop approval for sensitive actions</li> <li>\ud83d\udd04 Automatic rollbacks when things go wrong</li> <li>\ud83d\udcca Cost tracking and token usage monitoring</li> </ul>"},{"location":"#installation","title":"Installation","text":"<pre><code>pip install agenthelm\n</code></pre>"},{"location":"#quick-start","title":"Quick Start","text":""},{"location":"#cli","title":"CLI","text":"<pre><code># Initialize configuration\nagenthelm init\n\n# Run a simple task\nagenthelm run \"What is the capital of France?\"\n\n# Interactive chat\nagenthelm chat\n\n# Generate a plan\nagenthelm plan \"Build a web scraper\" -o plan.yaml\n\n# Execute the plan\nagenthelm execute plan.yaml\n</code></pre>"},{"location":"#python-sdk","title":"Python SDK","text":"<pre><code>import dspy\nfrom agenthelm import ToolAgent, tool\n\n# Define a tool\n@tool()\ndef get_weather(city: str) -&gt; str:\n    \"\"\"Gets the current weather for a given city.\"\"\"\n    if city == \"New York\":\n        return \"It is 24\u00b0C and sunny in New York.\"\n    return f\"Weather data not available for {city}.\"\n\n# Create agent\nlm = dspy.LM(\"mistral/mistral-large-latest\")\nagent = ToolAgent(name=\"weather_bot\", lm=lm, tools=[get_weather])\n\n# Run task\nresult = agent.run(\"What's the weather in New York?\")\nprint(result.answer)\n</code></pre>"},{"location":"#key-features","title":"Key Features","text":""},{"location":"#tool-decorator","title":"\ud83d\udd27 Tool Decorator","text":"<pre><code>@tool()\ndef search(query: str) -&gt; str:\n    \"\"\"Search the web.\"\"\"\n    return f\"Results for: {query}\"\n\n@tool(requires_approval=True)\ndef send_email(to: str, body: str) -&gt; dict:\n    \"\"\"Send an email (requires approval).\"\"\"\n    return {\"status\": \"sent\"}\n</code></pre>"},{"location":"#observability","title":"\ud83d\udcca Observability","text":"<pre><code># View execution traces\nagenthelm traces list\n\n# Filter by status\nagenthelm traces filter --status failed\n\n# Export to Markdown\nagenthelm traces export -o report.md -f md\n</code></pre>"},{"location":"#mcp-integration","title":"\ud83d\udd17 MCP Integration","text":"<pre><code># Connect to MCP servers\nagenthelm mcp list-tools uvx mcp-server-time\nagenthelm mcp run uvx mcp-server-time -t \"What time is it?\"\n</code></pre>"},{"location":"#plan-driven-execution","title":"\ud83d\udd04 Plan-Driven Execution","text":"<pre><code># Generate a multi-step plan\nagenthelm plan \"Build a todo app\" -o plan.yaml\n\n# Review and execute\nagenthelm execute plan.yaml\n</code></pre>"},{"location":"#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start Guide - Get running in 5 minutes</li> <li>CLI Reference - All commands and options</li> <li>Agents - ToolAgent and PlannerAgent</li> <li>Orchestration - Multi-agent workflows</li> </ul>"},{"location":"#license","title":"License","text":"<p>MIT License - See LICENSE for details.</p>"},{"location":"agents/","title":"Agents","text":"<p>AgentHelm provides DSPy-native agents for tool calling and planning.</p>"},{"location":"agents/#quick-start","title":"Quick Start","text":"<pre><code>import dspy\nfrom agenthelm import ToolAgent, PlannerAgent\n\n# Configure your LLM\nlm = dspy.LM(\"mistral/mistral-large-latest\")\n\n# Create a tool agent\nagent = ToolAgent(\n    name=\"assistant\",\n    lm=lm,\n    tools=[my_search_tool, my_summarize_tool],\n    max_iters=10\n)\nresult = agent.run(\"What is the weather in NYC?\")\nprint(result.answer)\n\n# Create a planner agent\nplanner = PlannerAgent(\n    name=\"planner\",\n    lm=lm,\n    tools=[search, summarize, write_file]\n)\nplan = planner.plan(\"Research AI trends and create a report\")\nprint(plan.to_yaml())  # Review before execution\n</code></pre>"},{"location":"agents/#agent-types","title":"Agent Types","text":""},{"location":"agents/#toolagent","title":"ToolAgent","text":"<p>ReAct-style agent that reasons and executes tools in a loop.</p> <pre><code>from agenthelm import ToolAgent, tool\n\n@tool()\ndef get_weather(city: str) -&gt; str:\n    \"\"\"Get weather for a city.\"\"\"\n    return f\"Sunny in {city}\"\n\nagent = ToolAgent(name=\"weather_bot\", lm=lm, tools=[get_weather])\nresult = agent.run(\"What's the weather in Paris?\")\n\n# Access results\nprint(result.success)    # True\nprint(result.answer)     # \"The weather in Paris is sunny.\"\nprint(result.events)     # List of traced tool executions\n</code></pre>"},{"location":"agents/#planneragent","title":"PlannerAgent","text":"<p>Generates structured execution plans before acting.</p> <pre><code>from agenthelm import PlannerAgent\n\nplanner = PlannerAgent(name=\"planner\", lm=lm, tools=[search, analyze, report])\nplan = planner.plan(\"Analyze competitor pricing\")\n\n# Review the plan\nprint(plan.goal)       # \"Analyze competitor pricing strategies\"\nprint(plan.reasoning)  # LLM's reasoning\nfor step in plan.steps:\n    print(f\"  {step.id}: {step.tool_name} - {step.description}\")\n\n# Execution is handled by Orchestrator (Week 4)\n</code></pre>"},{"location":"agents/#agentresult","title":"AgentResult","text":"<p>All agents return an <code>AgentResult</code> with execution details:</p> <pre><code>result = agent.run(\"Do something\")\n\nresult.success          # bool - Did the agent complete successfully?\nresult.answer           # str | None - Final answer\nresult.error            # str | None - Error message if failed\nresult.events           # list[Event] - All traced tool executions\nresult.total_cost_usd   # float - Aggregated LLM cost\nresult.token_usage      # TokenUsage - Aggregated tokens\nresult.iterations       # int - Number of reasoning loops\n</code></pre>"},{"location":"agents/#plan-schema","title":"Plan Schema","text":"<p>Plans are structured for parallel and sequential execution:</p> <pre><code>from agenthelm import Plan, PlanStep, StepStatus\n\nplan = Plan(\n    goal=\"Research and summarize\",\n    steps=[\n        PlanStep(id=\"1\", tool_name=\"search\", description=\"Find sources\"),\n        PlanStep(id=\"2\", tool_name=\"search\", description=\"Find more sources\"),\n        PlanStep(id=\"3\", tool_name=\"summarize\", description=\"Combine results\",\n                 depends_on=[\"1\", \"2\"]),  # Runs after 1 and 2 complete\n    ]\n)\n\n# Steps 1 and 2 can run in parallel (no dependencies)\nready = plan.get_ready_steps()  # Returns steps 1 and 2\n\n# After completion\nplan.mark_completed(\"1\", result=\"source A\")\nplan.mark_completed(\"2\", result=\"source B\")\n\n# Now step 3 is ready\nready = plan.get_ready_steps()  # Returns step 3\n</code></pre>"},{"location":"agents/#memory-integration","title":"Memory Integration","text":"<p>Agents can use the Memory Hub for context persistence:</p> <pre><code>from agenthelm import ToolAgent, MemoryHub\n\nhub = MemoryHub(data_dir=\"./data\")\n\nagent = ToolAgent(\n    name=\"memory_agent\",\n    lm=lm,\n    tools=[search],\n    memory=hub\n)\n\n# Agent can use memory internally\n# await agent._remember(\"User prefers dark mode\")\n# results = await agent._recall(\"user preferences\")\n</code></pre>"},{"location":"agents/#tracing-integration","title":"Tracing Integration","text":"<p>Agents automatically trace tool executions when given a tracer:</p> <pre><code>from agenthelm import ToolAgent, ExecutionTracer\nfrom agenthelm.core.storage import SqliteStorage\n\ntracer = ExecutionTracer(storage=SqliteStorage(\"traces.db\"))\n\nagent = ToolAgent(\n    name=\"traced_agent\",\n    lm=lm,\n    tools=[my_tool],\n    tracer=tracer\n)\n\nresult = agent.run(\"Do something\")\n# All tool calls are now persisted to traces.db\n</code></pre>"},{"location":"agents/#api-reference","title":"API Reference","text":"<p>options: show_source: false</p> <p>options: show_source: false</p> <p>options: show_source: false</p> <p>options: show_source: false</p> <p>options: show_source: false</p> <p>options: show_source: false</p>"},{"location":"agents/#agenthelm.BaseAgent","title":"BaseAgent","text":"<pre><code>BaseAgent(\n    name,\n    lm,\n    tools=None,\n    memory=None,\n    tracer=None,\n    role=None,\n)\n</code></pre> <p>               Bases: <code>ABC</code></p> <p>Abstract base class for all agents.</p> <p>Parameters:</p> Name Type Description Default <code>name</code> <code>str</code> <p>Agent identifier for tracing and registry</p> required <code>lm</code> <code>LM</code> <p>DSPy language model</p> required <code>tools</code> <code>list[Callable] | None</code> <p>List of tool functions the agent can use</p> <code>None</code> <code>memory</code> <code>MemoryHub | None</code> <p>Optional MemoryHub for context persistence</p> <code>None</code> <code>tracer</code> <code>ExecutionTracer | None</code> <p>Optional ExecutionTracer for tool call logging</p> <code>None</code> <code>role</code> <code>str | None</code> <p>Optional role/persona description that influences behavior</p> <code>None</code> Source code in <code>agenthelm/agent/base.py</code> <pre><code>def __init__(\n    self,\n    name: str,\n    lm: dspy.LM,\n    tools: list[Callable] | None = None,\n    memory: MemoryHub | None = None,\n    tracer: ExecutionTracer | None = None,\n    role: str | None = None,\n):\n    self.name = name\n    self.lm = lm\n    self.tools = tools or []\n    self.memory = memory\n    self.tracer = tracer\n    self.role = role\n</code></pre>"},{"location":"agents/#agenthelm.BaseAgent-attributes","title":"Attributes","text":""},{"location":"agents/#agenthelm.BaseAgent.lm","title":"lm  <code>instance-attribute</code>","text":"<pre><code>lm = lm\n</code></pre>"},{"location":"agents/#agenthelm.BaseAgent.memory","title":"memory  <code>instance-attribute</code>","text":"<pre><code>memory = memory\n</code></pre>"},{"location":"agents/#agenthelm.BaseAgent.name","title":"name  <code>instance-attribute</code>","text":"<pre><code>name = name\n</code></pre>"},{"location":"agents/#agenthelm.BaseAgent.role","title":"role  <code>instance-attribute</code>","text":"<pre><code>role = role\n</code></pre>"},{"location":"agents/#agenthelm.BaseAgent.tools","title":"tools  <code>instance-attribute</code>","text":"<pre><code>tools = tools or []\n</code></pre>"},{"location":"agents/#agenthelm.BaseAgent.tracer","title":"tracer  <code>instance-attribute</code>","text":"<pre><code>tracer = tracer\n</code></pre>"},{"location":"agents/#agenthelm.BaseAgent-functions","title":"Functions","text":""},{"location":"agents/#agenthelm.BaseAgent.run","title":"run  <code>abstractmethod</code>","text":"<pre><code>run(task)\n</code></pre> Source code in <code>agenthelm/agent/base.py</code> <pre><code>@abstractmethod\ndef run(self, task: str): ...\n</code></pre>"},{"location":"agents/#agenthelm.ToolAgent","title":"ToolAgent","text":"<pre><code>ToolAgent(\n    name,\n    lm,\n    tools=None,\n    memory=None,\n    tracer=None,\n    role=None,\n    max_iters=10,\n)\n</code></pre> <p>               Bases: <code>BaseAgent</code></p> <p>ReAct-style agent that reasons and executes tools.</p> <p>Uses DSPy's ReAct pattern to iteratively: 1. Reason about the task 2. Choose and execute a tool 3. Observe the result 4. Repeat until done</p> Source code in <code>agenthelm/agent/tool_agent.py</code> <pre><code>def __init__(\n    self,\n    name: str,\n    lm: dspy.LM,\n    tools: list[Callable] | None = None,\n    memory: MemoryHub | None = None,\n    tracer: ExecutionTracer | None = None,\n    role: str | None = None,\n    max_iters: int = 10,\n):\n    super().__init__(name, lm, tools, memory, tracer, role)\n    self.max_iters = max_iters\n\n    # Build signature with optional role context\n    if self.role:\n        signature = \"task, role -&gt; answer\"\n    else:\n        signature = \"task -&gt; answer\"\n\n    self._react = dspy.ReAct(\n        signature=signature,\n        tools=self._wrap_tools_for_tracing(),\n        max_iters=self.max_iters,\n    )\n    self._events = []\n</code></pre>"},{"location":"agents/#agenthelm.ToolAgent-attributes","title":"Attributes","text":""},{"location":"agents/#agenthelm.ToolAgent.max_iters","title":"max_iters  <code>instance-attribute</code>","text":"<pre><code>max_iters = max_iters\n</code></pre>"},{"location":"agents/#agenthelm.ToolAgent-functions","title":"Functions","text":""},{"location":"agents/#agenthelm.ToolAgent.run","title":"run","text":"<pre><code>run(task)\n</code></pre> <p>Execute the ReAct loop and return results with traced events.</p> Source code in <code>agenthelm/agent/tool_agent.py</code> <pre><code>def run(self, task: str) -&gt; AgentResult:\n    \"\"\"Execute the ReAct loop and return results with traced events.\"\"\"\n    self._events = []  # Reset events for this run\n    result = AgentResult(success=False, session_id=self.name)\n    try:\n        with dspy.context(lm=self.lm):\n            if self.role:\n                react_result = self._react(task=task, role=self.role)\n            else:\n                react_result = self._react(task=task)\n\n        result.success = True\n        result.answer = react_result.answer\n\n    except Exception as e:\n        result.success = False\n        result.error = str(e)\n\n    # Collect events from tracer if available\n    for event in self._events:\n        result.add_event(event)\n\n    return result\n</code></pre>"},{"location":"agents/#agenthelm.PlannerAgent","title":"PlannerAgent","text":"<pre><code>PlannerAgent(\n    name,\n    lm,\n    tools=None,\n    memory=None,\n    tracer=None,\n    role=None,\n    max_steps=10,\n)\n</code></pre> <p>               Bases: <code>BaseAgent</code></p> <p>Agent that generates structured execution plans.</p> <p>The PlannerAgent creates plans but does NOT execute them. Execution is handled by the Orchestrator (Week 4).</p> Source code in <code>agenthelm/agent/planner.py</code> <pre><code>def __init__(\n    self,\n    name: str,\n    lm: dspy.LM,\n    tools: list[Callable] | None = None,\n    memory: MemoryHub | None = None,\n    tracer: ExecutionTracer | None = None,\n    role: str | None = None,\n    max_steps: int = 10,\n):\n    super().__init__(name, lm, tools, memory, tracer, role)\n    self.max_steps = max_steps\n\n    # DSPy module for plan generation - include role if provided\n    if self.role:\n        self._planning = dspy.ChainOfThought(\n            \"task, available_tools, role -&gt; goal, reasoning, steps_json\"\n        )\n    else:\n        self._planning = dspy.ChainOfThought(\n            \"task, available_tools -&gt; goal, reasoning, steps_json\"\n        )\n</code></pre>"},{"location":"agents/#agenthelm.PlannerAgent-attributes","title":"Attributes","text":""},{"location":"agents/#agenthelm.PlannerAgent.max_steps","title":"max_steps  <code>instance-attribute</code>","text":"<pre><code>max_steps = max_steps\n</code></pre>"},{"location":"agents/#agenthelm.PlannerAgent-functions","title":"Functions","text":""},{"location":"agents/#agenthelm.PlannerAgent.plan","title":"plan","text":"<pre><code>plan(task)\n</code></pre> <p>Generate an execution plan for the given task.</p> <p>Parameters:</p> Name Type Description Default <code>task</code> <code>str</code> <p>The task to plan for</p> required <p>Returns:</p> Type Description <code>Plan</code> <p>Plan object with steps (not yet executed)</p> Source code in <code>agenthelm/agent/planner.py</code> <pre><code>def plan(self, task: str) -&gt; Plan:\n    \"\"\"\n    Generate an execution plan for the given task.\n\n    Args:\n        task: The task to plan for\n\n    Returns:\n        Plan object with steps (not yet executed)\n    \"\"\"\n    tool_descriptions = self._get_tool_descriptions()\n\n    with dspy.context(lm=self.lm):\n        if self.role:\n            result = self._planning(\n                task=task,\n                available_tools=tool_descriptions,\n                role=self.role,\n            )\n        else:\n            result = self._planning(\n                task=task,\n                available_tools=tool_descriptions,\n            )\n\n    # Parse the steps from LLM output\n    steps = self._parse_steps(result.steps_json)\n\n    return Plan(\n        goal=result.goal,\n        reasoning=result.reasoning,\n        steps=steps,\n    )\n</code></pre>"},{"location":"agents/#agenthelm.PlannerAgent.run","title":"run","text":"<pre><code>run(task)\n</code></pre> <p>Generate a plan (alias for plan()).</p> Source code in <code>agenthelm/agent/planner.py</code> <pre><code>def run(self, task: str) -&gt; Plan:\n    \"\"\"Generate a plan (alias for plan()).\"\"\"\n    return self.plan(task)\n</code></pre>"},{"location":"agents/#agenthelm.AgentResult","title":"AgentResult","text":"<p>               Bases: <code>BaseModel</code></p> <p>Result of an agent execution.</p> <p>Contains the final answer, execution events, and cost/token metrics.</p>"},{"location":"agents/#agenthelm.AgentResult-attributes","title":"Attributes","text":""},{"location":"agents/#agenthelm.AgentResult.answer","title":"answer  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>answer = Field(\n    default=None, description=\"Final answer from the agent\"\n)\n</code></pre>"},{"location":"agents/#agenthelm.AgentResult.error","title":"error  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>error = Field(\n    default=None, description=\"Error message if failed\"\n)\n</code></pre>"},{"location":"agents/#agenthelm.AgentResult.events","title":"events  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>events = Field(\n    default_factory=list, description=\"All tool executions\"\n)\n</code></pre>"},{"location":"agents/#agenthelm.AgentResult.iterations","title":"iterations  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>iterations = Field(\n    default=0, description=\"Number of reasoning iterations\"\n)\n</code></pre>"},{"location":"agents/#agenthelm.AgentResult.session_id","title":"session_id  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>session_id = Field(\n    default=None, description=\"Session identifier\"\n)\n</code></pre>"},{"location":"agents/#agenthelm.AgentResult.success","title":"success  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>success = Field(\n    description=\"Whether the agent completed successfully\"\n)\n</code></pre>"},{"location":"agents/#agenthelm.AgentResult.token_usage","title":"token_usage  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>token_usage = Field(\n    default_factory=lambda: TokenUsage(\n        input_tokens=0, output_tokens=0\n    ),\n    description=\"Aggregated token usage\",\n)\n</code></pre>"},{"location":"agents/#agenthelm.AgentResult.total_cost_usd","title":"total_cost_usd  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>total_cost_usd = Field(\n    default=0.0, description=\"Total estimated cost\"\n)\n</code></pre>"},{"location":"agents/#agenthelm.AgentResult-functions","title":"Functions","text":""},{"location":"agents/#agenthelm.AgentResult.add_event","title":"add_event","text":"<pre><code>add_event(event)\n</code></pre> <p>Add an event and update aggregated metrics.</p> Source code in <code>agenthelm/agent/result.py</code> <pre><code>def add_event(self, event: Event) -&gt; None:\n    \"\"\"Add an event and update aggregated metrics.\"\"\"\n    self.events.append(event)\n    if event.estimated_cost_usd:\n        self.total_cost_usd += event.estimated_cost_usd\n    if event.token_usage:\n        self.token_usage = TokenUsage(\n            input_tokens=self.token_usage.input_tokens\n            + event.token_usage.input_tokens,\n            output_tokens=self.token_usage.output_tokens\n            + event.token_usage.output_tokens,\n            model=event.token_usage.model or self.token_usage.model,\n        )\n</code></pre>"},{"location":"agents/#agenthelm.Plan","title":"Plan","text":"<p>               Bases: <code>BaseModel</code></p> <p>A structured execution plan with potentially parallel steps.</p> <p>Steps with no dependencies can run in parallel. Steps with dependencies run after their dependencies complete.</p>"},{"location":"agents/#agenthelm.Plan-attributes","title":"Attributes","text":""},{"location":"agents/#agenthelm.Plan.approved","title":"approved  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>approved = Field(\n    default=False,\n    description=\"Whether plan has been approved for execution\",\n)\n</code></pre>"},{"location":"agents/#agenthelm.Plan.goal","title":"goal  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>goal = Field(\n    description=\"The goal this plan aims to achieve\"\n)\n</code></pre>"},{"location":"agents/#agenthelm.Plan.is_complete","title":"is_complete  <code>property</code>","text":"<pre><code>is_complete\n</code></pre> <p>Check if all steps are completed or failed.</p>"},{"location":"agents/#agenthelm.Plan.reasoning","title":"reasoning  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>reasoning = Field(\n    default=\"\", description=\"LLM reasoning for this plan\"\n)\n</code></pre>"},{"location":"agents/#agenthelm.Plan.steps","title":"steps  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>steps = Field(\n    default_factory=list, description=\"Ordered steps\"\n)\n</code></pre>"},{"location":"agents/#agenthelm.Plan.success","title":"success  <code>property</code>","text":"<pre><code>success\n</code></pre> <p>Check if plan completed successfully (all steps completed).</p>"},{"location":"agents/#agenthelm.Plan-functions","title":"Functions","text":""},{"location":"agents/#agenthelm.Plan.get_ready_steps","title":"get_ready_steps","text":"<pre><code>get_ready_steps()\n</code></pre> <p>Get all steps that are ready to execute (no pending dependencies).</p> Source code in <code>agenthelm/agent/plan.py</code> <pre><code>def get_ready_steps(self) -&gt; list[PlanStep]:\n    \"\"\"Get all steps that are ready to execute (no pending dependencies).\"\"\"\n    completed_ids = {s.id for s in self.steps if s.status == StepStatus.COMPLETED}\n\n    ready = []\n    for step in self.steps:\n        if step.status != StepStatus.PENDING:\n            continue\n        # Check if all dependencies are completed\n        if all(dep_id in completed_ids for dep_id in step.depends_on):\n            ready.append(step)\n    return ready\n</code></pre>"},{"location":"agents/#agenthelm.Plan.get_step","title":"get_step","text":"<pre><code>get_step(step_id)\n</code></pre> <p>Get a step by ID.</p> Source code in <code>agenthelm/agent/plan.py</code> <pre><code>def get_step(self, step_id: str) -&gt; PlanStep | None:\n    \"\"\"Get a step by ID.\"\"\"\n    for step in self.steps:\n        if step.id == step_id:\n            return step\n    return None\n</code></pre>"},{"location":"agents/#agenthelm.Plan.mark_completed","title":"mark_completed","text":"<pre><code>mark_completed(step_id, result=None)\n</code></pre> <p>Mark a step as completed.</p> Source code in <code>agenthelm/agent/plan.py</code> <pre><code>def mark_completed(self, step_id: str, result: Any = None) -&gt; None:\n    \"\"\"Mark a step as completed.\"\"\"\n    step = self.get_step(step_id)\n    if step:\n        step.status = StepStatus.COMPLETED\n        step.result = result\n</code></pre>"},{"location":"agents/#agenthelm.Plan.mark_failed","title":"mark_failed","text":"<pre><code>mark_failed(step_id, error)\n</code></pre> <p>Mark a step as failed.</p> Source code in <code>agenthelm/agent/plan.py</code> <pre><code>def mark_failed(self, step_id: str, error: str) -&gt; None:\n    \"\"\"Mark a step as failed.\"\"\"\n    step = self.get_step(step_id)\n    if step:\n        step.status = StepStatus.FAILED\n        step.error = error\n</code></pre>"},{"location":"agents/#agenthelm.Plan.to_yaml","title":"to_yaml","text":"<pre><code>to_yaml()\n</code></pre> <p>Serialize plan to YAML for human review.</p> Source code in <code>agenthelm/agent/plan.py</code> <pre><code>def to_yaml(self) -&gt; str:\n    \"\"\"Serialize plan to YAML for human review.\"\"\"\n    import yaml\n\n    data = {\n        \"goal\": self.goal,\n        \"reasoning\": self.reasoning,\n        \"steps\": [\n            {\n                \"id\": s.id,\n                \"agent\": s.agent_name,\n                \"tool\": s.tool_name,\n                \"description\": s.description,\n                \"args\": s.args,\n                \"depends_on\": s.depends_on if s.depends_on else None,\n            }\n            for s in self.steps\n        ],\n    }\n    # Filter None values\n    for step in data[\"steps\"]:\n        step = {k: v for k, v in step.items() if v is not None}\n    return yaml.dump(data, default_flow_style=False, sort_keys=False)\n</code></pre>"},{"location":"agents/#agenthelm.PlanStep","title":"PlanStep","text":"<p>               Bases: <code>BaseModel</code></p> <p>A single step in an execution plan.</p> <p>Steps can have dependencies for parallel/sequential execution. Supports Saga pattern with compensating actions on failure.</p>"},{"location":"agents/#agenthelm.PlanStep-attributes","title":"Attributes","text":""},{"location":"agents/#agenthelm.PlanStep.agent_name","title":"agent_name  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>agent_name = Field(\n    default=None, description=\"Agent to delegate to\"\n)\n</code></pre>"},{"location":"agents/#agenthelm.PlanStep.args","title":"args  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>args = Field(\n    default_factory=dict,\n    description=\"Arguments to pass to the tool\",\n)\n</code></pre>"},{"location":"agents/#agenthelm.PlanStep.compensate_args","title":"compensate_args  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>compensate_args = Field(\n    default_factory=dict,\n    description=\"Arguments for compensating tool\",\n)\n</code></pre>"},{"location":"agents/#agenthelm.PlanStep.compensate_tool","title":"compensate_tool  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>compensate_tool = Field(\n    default=None,\n    description=\"Tool to run on rollback (overrides tool default)\",\n)\n</code></pre>"},{"location":"agents/#agenthelm.PlanStep.depends_on","title":"depends_on  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>depends_on = Field(\n    default_factory=list,\n    description=\"IDs of steps that must complete first\",\n)\n</code></pre>"},{"location":"agents/#agenthelm.PlanStep.description","title":"description  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>description = Field(\n    description=\"Human-readable description of this step\"\n)\n</code></pre>"},{"location":"agents/#agenthelm.PlanStep.error","title":"error  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>error = Field(default=None, description='Error if failed')\n</code></pre>"},{"location":"agents/#agenthelm.PlanStep.id","title":"id  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>id = Field(description='Unique step identifier')\n</code></pre>"},{"location":"agents/#agenthelm.PlanStep.is_ready","title":"is_ready  <code>property</code>","text":"<pre><code>is_ready\n</code></pre> <p>Check if step is ready to execute (no pending dependencies).</p>"},{"location":"agents/#agenthelm.PlanStep.result","title":"result  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>result = Field(\n    default=None, description=\"Result after execution\"\n)\n</code></pre>"},{"location":"agents/#agenthelm.PlanStep.status","title":"status  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>status = Field(\n    default=PENDING, description=\"Current status\"\n)\n</code></pre>"},{"location":"agents/#agenthelm.PlanStep.tool_name","title":"tool_name  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>tool_name = Field(description=\"Name of the tool to execute\")\n</code></pre>"},{"location":"api_reference/","title":"API Reference","text":"<p>Complete API reference for AgentHelm.</p>"},{"location":"api_reference/#core","title":"Core","text":""},{"location":"api_reference/#tool-decorator","title":"<code>@tool</code> Decorator","text":"<pre><code>from agenthelm import tool\n\n@tool(\n    requires_approval=False,  # Human-in-the-loop\n    max_retries=0,            # Automatic retries\n    timeout=None,             # Execution timeout\n    compensating_tool=None,   # Rollback function name\n)\ndef my_tool(arg: str) -&gt; str:\n    \"\"\"Tool description.\"\"\"\n    return result\n</code></pre>"},{"location":"api_reference/#tool_registry","title":"<code>TOOL_REGISTRY</code>","text":"<p>Global registry of all decorated tools.</p> <pre><code>from agenthelm import TOOL_REGISTRY\n\n# List all registered tools\nfor name, info in TOOL_REGISTRY.items():\n    print(f\"{name}: {info['description']}\")\n</code></pre>"},{"location":"api_reference/#agents","title":"Agents","text":""},{"location":"api_reference/#toolagent","title":"<code>ToolAgent</code>","text":"<p>ReAct-style agent that reasons and executes tools.</p> <pre><code>from agenthelm import ToolAgent\n\nagent = ToolAgent(\n    name=\"my_agent\",           # Agent identifier\n    lm=lm,                     # DSPy language model\n    tools=[tool1, tool2],      # List of tool functions\n    memory=None,               # Optional MemoryHub\n    tracer=None,               # Optional ExecutionTracer\n    role=None,                 # Optional persona description\n    max_iters=10,              # Max ReAct iterations\n)\n\nresult = agent.run(\"Your task here\")\n</code></pre>"},{"location":"api_reference/#planneragent","title":"<code>PlannerAgent</code>","text":"<p>Generates execution plans from tasks.</p> <pre><code>from agenthelm import PlannerAgent\n\nplanner = PlannerAgent(\n    name=\"my_planner\",\n    lm=lm,\n    tools=[tool1, tool2],\n    role=None,\n)\n\nplan = planner.plan(\"Build a web scraper\")\nprint(plan.to_yaml())\n</code></pre>"},{"location":"api_reference/#agentresult","title":"<code>AgentResult</code>","text":"<p>Result of agent execution.</p> Field Type Description <code>success</code> <code>bool</code> Whether execution succeeded <code>answer</code> <code>str</code> Final answer from agent <code>error</code> <code>str</code> Error message if failed <code>events</code> <code>list[Event]</code> All tool executions <code>total_cost_usd</code> <code>float</code> Estimated total cost <code>token_usage</code> <code>TokenUsage</code> Aggregated token usage <code>iterations</code> <code>int</code> Number of ReAct iterations"},{"location":"api_reference/#orchestration","title":"Orchestration","text":""},{"location":"api_reference/#agentregistry","title":"<code>AgentRegistry</code>","text":"<p>Registry for named agent lookup.</p> <pre><code>from agenthelm import AgentRegistry\n\nregistry = AgentRegistry()\nregistry.register(\"researcher\", researcher_agent)\nregistry.register(\"writer\", writer_agent)\n\nagent = registry.get(\"researcher\")\n</code></pre>"},{"location":"api_reference/#orchestrator","title":"<code>Orchestrator</code>","text":"<p>Executes plans by routing steps to agents.</p> <pre><code>from agenthelm import Orchestrator\n\norchestrator = Orchestrator(\n    registry=registry,\n    parallel=True,  # Enable parallel step execution\n)\n\nresult_plan = orchestrator.execute(plan)\n</code></pre>"},{"location":"api_reference/#plans","title":"Plans","text":""},{"location":"api_reference/#plan","title":"<code>Plan</code>","text":"<p>Execution plan with steps and dependencies.</p> <pre><code>from agenthelm import Plan, PlanStep\n\nplan = Plan(\n    goal=\"Build a web scraper\",\n    reasoning=\"Need to fetch and parse HTML\",\n    steps=[\n        PlanStep(id=\"step1\", tool_name=\"fetch\", description=\"Fetch page\"),\n        PlanStep(id=\"step2\", tool_name=\"parse\", description=\"Parse HTML\", depends_on=[\"step1\"]),\n    ],\n)\n\n# Serialize to YAML\nyaml_str = plan.to_yaml()\n\n# Load from YAML\nplan = Plan.from_yaml(yaml_str)\n</code></pre>"},{"location":"api_reference/#planstep","title":"<code>PlanStep</code>","text":"<p>Single step in a plan.</p> Field Type Description <code>id</code> <code>str</code> Unique step identifier <code>tool_name</code> <code>str</code> Tool to execute <code>description</code> <code>str</code> What this step does <code>args</code> <code>dict</code> Tool arguments <code>depends_on</code> <code>list[str]</code> Step IDs this depends on <code>status</code> <code>StepStatus</code> Execution status <code>agent_name</code> <code>str</code> Optional agent to route to <code>compensate_tool</code> <code>str</code> Rollback tool for Saga"},{"location":"api_reference/#tracing","title":"Tracing","text":""},{"location":"api_reference/#executiontracer","title":"<code>ExecutionTracer</code>","text":"<p>Traces tool executions and saves to storage.</p> <pre><code>from agenthelm import ExecutionTracer\nfrom agenthelm.core.storage import SqliteStorage\n\ntracer = ExecutionTracer(\n    storage=SqliteStorage(\"traces.db\"),\n    approval_handler=None,  # Optional ApprovalHandler\n)\n\noutput, event = tracer.trace_and_execute(my_tool, arg=\"value\")\n</code></pre>"},{"location":"api_reference/#event","title":"<code>Event</code>","text":"<p>Execution event with full metadata.</p> Field Type Description <code>timestamp</code> <code>datetime</code> When executed <code>tool_name</code> <code>str</code> Tool name <code>inputs</code> <code>dict</code> Input arguments <code>outputs</code> <code>Any</code> Return value <code>execution_time</code> <code>float</code> Duration in seconds <code>token_usage</code> <code>TokenUsage</code> Token counts <code>estimated_cost_usd</code> <code>float</code> Estimated cost <code>error_state</code> <code>str</code> Error if failed"},{"location":"api_reference/#opentelemetry","title":"OpenTelemetry","text":"<pre><code>from agenthelm.tracing import init_tracing, trace_tool, trace_agent\n\ninit_tracing(service_name=\"my-app\", otlp_endpoint=\"http://localhost:4317\")\n\nwith trace_tool(\"search\", inputs={\"q\": \"AI\"}):\n    result = search(\"AI\")\n</code></pre>"},{"location":"api_reference/#storage","title":"Storage","text":""},{"location":"api_reference/#jsonstorage","title":"<code>JsonStorage</code>","text":"<pre><code>from agenthelm.core.storage import JsonStorage\n\nstorage = JsonStorage(\"traces.json\")\nstorage.save(event)\nevents = storage.load()\n</code></pre>"},{"location":"api_reference/#sqlitestorage","title":"<code>SqliteStorage</code>","text":"<pre><code>from agenthelm.core.storage import SqliteStorage\n\nstorage = SqliteStorage(\"traces.db\")\nstorage.save(event)\nevents = storage.query(tool_name=\"search\", limit=10)\n</code></pre>"},{"location":"api_reference/#memory","title":"Memory","text":""},{"location":"api_reference/#memoryhub","title":"<code>MemoryHub</code>","text":"<p>Central hub for short-term and semantic memory.</p> <pre><code>from agenthelm import MemoryHub\n\nhub = MemoryHub(\n    short_term=InMemoryShortTermMemory(),\n    semantic=SemanticMemory(qdrant_url=\"http://localhost:6333\"),\n)\n\n# Use with agent\nagent = ToolAgent(name=\"agent\", lm=lm, tools=[], memory=hub)\n</code></pre>"},{"location":"api_reference/#short-term-memory","title":"Short-Term Memory","text":"<ul> <li><code>InMemoryShortTermMemory</code> - In-memory dictionary</li> <li><code>SqliteShortTermMemory</code> - SQLite-backed</li> </ul>"},{"location":"api_reference/#semantic-memory","title":"Semantic Memory","text":"<ul> <li><code>SemanticMemory</code> - Qdrant-backed vector search</li> </ul>"},{"location":"api_reference/#cost-tracking","title":"Cost Tracking","text":""},{"location":"api_reference/#costtracker","title":"<code>CostTracker</code>","text":"<pre><code>from agenthelm import get_cost_tracker\n\ntracker = get_cost_tracker()\ntracker.record(\"gpt-4o\", input_tokens=500, output_tokens=150)\n\nsummary = tracker.get_summary()\n# {\"total_input_tokens\": 500, \"total_output_tokens\": 150, \"total_cost_usd\": 0.0055}\n</code></pre>"},{"location":"api_reference/#approval-handlers","title":"Approval Handlers","text":"<pre><code>from agenthelm import CliHandler, AutoApproveHandler, AutoDenyHandler\n\n# Interactive CLI approval\ntracer = ExecutionTracer(approval_handler=CliHandler())\n\n# Auto-approve (testing)\ntracer = ExecutionTracer(approval_handler=AutoApproveHandler())\n\n# Auto-deny (dry-run)\ntracer = ExecutionTracer(approval_handler=AutoDenyHandler())\n</code></pre>"},{"location":"cli/","title":"Command Line Interface","text":"<p>AgentHelm provides a powerful CLI for running agents, managing plans, and viewing traces.</p>"},{"location":"cli/#installation","title":"Installation","text":"<pre><code>pip install agenthelm\n</code></pre>"},{"location":"cli/#quick-start","title":"Quick Start","text":"<pre><code># Initialize configuration\nagenthelm init\n\n# Run a simple task\nagenthelm run \"What is 2+2?\"\n\n# Interactive chat mode\nagenthelm chat\n</code></pre>"},{"location":"cli/#commands","title":"Commands","text":""},{"location":"cli/#agenthelm-run","title":"<code>agenthelm run</code>","text":"<p>Run a task with a ToolAgent.</p> <pre><code>agenthelm run \"Search for AI news and summarize\" \\\n  --model mistral/mistral-large-latest \\\n  --tools mytools:search,summarize \\\n  --trace\n</code></pre> Option Description <code>-m, --model</code> LLM model (default: from config) <code>-t, --tools</code> Tools to load (<code>module:func,func2</code>) <code>--max-iters</code> Max reasoning iterations (default: 10) <code>--trace</code> Enable OpenTelemetry/Jaeger tracing <code>-s, --trace-storage</code> Custom trace storage path"},{"location":"cli/#agenthelm-plan","title":"<code>agenthelm plan</code>","text":"<p>Generate an execution plan for a complex task.</p> <pre><code># Generate and display a plan\nagenthelm plan \"Build a web scraper for news sites\"\n\n# Save plan to file\nagenthelm plan \"Build a web scraper\" -o plan.yaml\n</code></pre> Option Description <code>-m, --model</code> LLM model <code>-o, --output</code> Save plan to YAML file <code>--approve</code> Auto-approve for execution"},{"location":"cli/#agenthelm-execute","title":"<code>agenthelm execute</code>","text":"<p>Execute a plan from a YAML file.</p> <pre><code># Preview plan\nagenthelm execute plan.yaml --dry-run\n\n# Execute with confirmation\nagenthelm execute plan.yaml\n</code></pre> Option Description <code>-m, --model</code> LLM model <code>--dry-run</code> Preview without executing"},{"location":"cli/#agenthelm-chat","title":"<code>agenthelm chat</code>","text":"<p>Interactive REPL mode for conversational tasks.</p> <pre><code>agenthelm chat --model mistral/mistral-large-latest\n</code></pre> <pre><code>AgentHelm Chat (model: mistral/mistral-large-latest)\nType 'exit' or 'quit' to end the session\n\n&gt; What is the capital of France?\nParis is the capital of France.\n\n&gt; exit\nGoodbye!\n</code></pre>"},{"location":"cli/#agenthelm-traces","title":"<code>agenthelm traces</code>","text":"<p>View and manage execution traces.</p>"},{"location":"cli/#list-traces","title":"List traces","text":"<pre><code>agenthelm traces list\nagenthelm traces list -n 20\n</code></pre>"},{"location":"cli/#show-trace-details","title":"Show trace details","text":"<pre><code>agenthelm traces show 0     # Show most recent trace\n</code></pre>"},{"location":"cli/#filter-traces","title":"Filter traces","text":"<pre><code># By tool name\nagenthelm traces filter --tool search\n\n# By status\nagenthelm traces filter --status success\n\n# By date range\nagenthelm traces filter --date-from 2024-01-01 --date-to 2024-12-31\n\n# Output as JSON\nagenthelm traces filter --status failed --json\n</code></pre>"},{"location":"cli/#export-traces","title":"Export traces","text":"<pre><code># Export to JSON\nagenthelm traces export -o report.json -f json\n\n# Export to CSV\nagenthelm traces export -o report.csv -f csv\n\n# Export to Markdown\nagenthelm traces export -o report.md -f md\n</code></pre>"},{"location":"cli/#agenthelm-mcp","title":"<code>agenthelm mcp</code>","text":"<p>Manage MCP (Model Context Protocol) server connections.</p>"},{"location":"cli/#list-mcp-tools","title":"List MCP tools","text":"<pre><code>agenthelm mcp list-tools uvx mcp-server-time\n</code></pre>"},{"location":"cli/#run-task-with-mcp-tools","title":"Run task with MCP tools","text":"<pre><code>agenthelm mcp run uvx mcp-server-time -t \"What time is it?\"\n</code></pre>"},{"location":"cli/#agenthelm-config","title":"<code>agenthelm config</code>","text":"<p>Manage configuration settings.</p> <pre><code># Show current config\nagenthelm config show\n\n# Set default model\nagenthelm config set default_model mistral/mistral-large-latest\n\n# Set API key\nagenthelm config set api_keys.openai sk-...\n\n# Show config file path\nagenthelm config path\n</code></pre>"},{"location":"cli/#agenthelm-init","title":"<code>agenthelm init</code>","text":"<p>Initialize AgentHelm configuration.</p> <pre><code>agenthelm init\n</code></pre> <p>Creates <code>~/.agenthelm/config.yaml</code> with default settings.</p>"},{"location":"cli/#global-options","title":"Global Options","text":"Option Description <code>-v, --verbose</code> Enable debug logging <code>--version</code> Show version <code>--help</code> Show help"},{"location":"cli/#configuration","title":"Configuration","text":"<p>Configuration is stored in <code>~/.agenthelm/config.yaml</code>:</p> <pre><code>default_model: mistral/mistral-large-latest\nmax_iters: 10\ntrace_storage: ~/.agenthelm/traces.db\napi_keys:\n  openai: sk-...\n  anthropic: sk-...\n</code></pre>"},{"location":"cli/#environment-variables","title":"Environment Variables","text":"Variable Description <code>OPENAI_API_KEY</code> OpenAI API key <code>ANTHROPIC_API_KEY</code> Anthropic API key <code>MISTRAL_API_KEY</code> Mistral API key <code>AGENTHELM_MODEL</code> Override default model"},{"location":"cli/#trace-storage","title":"Trace Storage","text":"<p>Traces are automatically saved to <code>~/.agenthelm/traces.db</code>.</p> <p>Override with:</p> <ul> <li>CLI flag: <code>--trace-storage /path/to/traces.db</code></li> <li>Config: <code>trace_storage: /path/to/traces.db</code></li> </ul> <p>Supported formats:</p> <ul> <li>SQLite (<code>.db</code>, <code>.sqlite</code>)</li> <li>JSON (<code>.json</code>)</li> </ul>"},{"location":"concepts/","title":"Core Concepts","text":"<p>This section explains the fundamental ideas behind AgentHelm.</p>"},{"location":"concepts/#tool-contracts","title":"Tool Contracts","text":"<p>Tools are the building blocks of agent actions. AgentHelm uses a decorator-based approach to define tools with rich metadata:</p> <pre><code>from agenthelm import tool\n\n@tool(\n    requires_approval=True,  # Human-in-the-loop\n    max_retries=3,           # Automatic retries\n    timeout=30.0,            # Execution timeout\n    tags=[\"financial\", \"sensitive\"]\n)\ndef charge_credit_card(amount: float, card_id: str) -&gt; dict:\n    \"\"\"Charge a credit card for the specified amount.\"\"\"\n    return {\"status\": \"charged\", \"transaction_id\": \"txn_123\"}\n</code></pre> <p>The <code>@tool</code> decorator automatically:</p> <ul> <li>Extracts the function signature and docstring</li> <li>Registers the tool in <code>TOOL_REGISTRY</code></li> <li>Enables execution tracing and cost tracking</li> </ul>"},{"location":"concepts/#execution-tracing","title":"Execution Tracing","text":"<p>The <code>ExecutionTracer</code> records every tool call with rich metadata:</p> <pre><code>from agenthelm import ExecutionTracer\nfrom agenthelm.core.storage import JsonStorage\n\ntracer = ExecutionTracer(storage=JsonStorage(\"trace.json\"))\n\n# Execute a tool with full tracing\noutput, event = tracer.trace_and_execute(my_tool, arg1=\"value\", arg2=123)\n\n# Event contains: timestamp, inputs, outputs, duration, token_usage, cost, etc.\n</code></pre>"},{"location":"concepts/#event-model","title":"Event Model","text":"<p>Every execution produces an <code>Event</code> with these fields:</p> Field Description <code>timestamp</code> When the event occurred <code>tool_name</code> Name of the executed tool <code>inputs</code> / <code>outputs</code> Arguments and return value <code>execution_duration_ms</code> How long it took <code>token_usage</code> LLM tokens (input/output/model) <code>estimated_cost_usd</code> Cost estimate based on pricing <code>agent_name</code> Which agent executed this <code>session_id</code> Session identifier <code>trace_id</code> Unique execution ID"},{"location":"concepts/#cost-tracking","title":"Cost Tracking","text":"<p>AgentHelm includes built-in cost tracking for LLM usage:</p> <pre><code>from agenthelm import CostTracker, get_cost_tracker\n\n# Token-only tracking (no pricing)\ntracker = get_cost_tracker(tokens_only=True)\n\n# Full cost tracking with pricing\ntracker = get_cost_tracker()  # Uses built-in pricing.yaml\n\n# Track usage\ntracker.record(\"gpt-4o\", input_tokens=500, output_tokens=150)\n\n# Get summary\nsummary = tracker.get_summary()\n# {\n#     \"total_input_tokens\": 500,\n#     \"total_output_tokens\": 150,\n#     \"total_cost_usd\": 0.0055,\n#     \"by_model\": {...}\n# }\n</code></pre>"},{"location":"concepts/#approval-handlers","title":"Approval Handlers","text":"<p>Control human-in-the-loop behavior with different handlers:</p> <pre><code>from agenthelm import CliHandler, AutoApproveHandler, AutoDenyHandler\n\n# Interactive CLI approval\ntracer = ExecutionTracer(approval_handler=CliHandler())\n\n# Auto-approve all (for testing)\ntracer = ExecutionTracer(approval_handler=AutoApproveHandler())\n\n# Auto-deny all (for dry-run)\ntracer = ExecutionTracer(approval_handler=AutoDenyHandler())\n</code></pre>"},{"location":"concepts/#storage-backends","title":"Storage Backends","text":"<p>Events can be stored in different backends:</p> <pre><code>from agenthelm.core.storage import JsonStorage, SqliteStorage\n\n# JSON file (simple, portable)\nstorage = JsonStorage(\"traces.json\")\n\n# SQLite (queryable, indexed)\nstorage = SqliteStorage(\"traces.db\")\n\n# Query by session\nevents = storage.query(session_id=\"abc-123\", limit=100)\n</code></pre>"},{"location":"concepts/#reliability-features","title":"Reliability Features","text":""},{"location":"concepts/#retries","title":"Retries","text":"<pre><code>@tool(max_retries=3, retry_delay=1.0)\ndef flaky_api_call(endpoint: str) -&gt; dict:\n    \"\"\"Call an external API that might fail.\"\"\"\n    return requests.get(endpoint).json()\n</code></pre>"},{"location":"concepts/#human-approval","title":"Human Approval","text":"<pre><code>@tool(requires_approval=True)\ndef delete_file(path: str) -&gt; bool:\n    \"\"\"Delete a file (requires human approval).\"\"\"\n    os.remove(path)\n    return True\n</code></pre>"},{"location":"concepts/#compensating-actions","title":"Compensating Actions","text":"<pre><code>@tool(compensating_tool=\"restore_file\")\ndef archive_file(path: str) -&gt; str:\n    \"\"\"Archive a file (can be rolled back).\"\"\"\n    archive_path = f\"{path}.archived\"\n    shutil.move(path, archive_path)\n    return archive_path\n\n@tool()\ndef restore_file(archive_path: str) -&gt; str:\n    \"\"\"Restore an archived file.\"\"\"\n    original_path = archive_path.replace(\".archived\", \"\")\n    shutil.move(archive_path, original_path)\n    return original_path\n</code></pre>"},{"location":"mcp/","title":"MCP Integration","text":"<p>AgentHelm integrates with the Model Context Protocol (MCP) to connect agents to external tools and data sources.</p>"},{"location":"mcp/#quick-start","title":"Quick Start","text":"<pre><code>import asyncio\nfrom agenthelm import MCPToolAdapter, ToolAgent\nimport dspy\n\nlm = dspy.LM(\"mistral/mistral-large-latest\")\n\nasync def main():\n    # Connect to an MCP server\n    adapter = MCPToolAdapter(\n        server_config={\"command\": \"uvx\", \"args\": [\"mcp-server-time\"]}\n    )\n    await adapter.connect()\n\n    # Get tools from MCP server\n    tools = adapter.get_tools()\n\n    # Use with AgentHelm agents\n    agent = ToolAgent(name=\"time_agent\", lm=lm, tools=tools)\n    result = agent.run(\"What time is it?\")\n    print(result.answer)\n\n    await adapter.close()\n\nasyncio.run(main())\n</code></pre>"},{"location":"mcp/#mcptooladapter","title":"MCPToolAdapter","text":"<p>Wraps MCP server tools as AgentHelm-compatible callables.</p> <pre><code>from agenthelm import MCPToolAdapter\n\nadapter = MCPToolAdapter(\n    server_config={\n        \"command\": \"uvx\",\n        \"args\": [\"mcp-server-filesystem\", \"/path/to/files\"],\n        \"env\": {\"DEBUG\": \"true\"},  # Optional\n    }\n)\n\nawait adapter.connect()\ntools = adapter.get_tools()\n</code></pre>"},{"location":"mcp/#server-config","title":"Server Config","text":"Key Description <code>command</code> Executable to run (e.g., <code>uvx</code>, <code>npx</code>, <code>python</code>) <code>args</code> Command arguments <code>env</code> Environment variables (optional)"},{"location":"mcp/#saga-support","title":"Saga Support","text":"<p>Define compensating actions for MCP tools:</p> <pre><code>adapter = MCPToolAdapter(\n    server_config={\"command\": \"uvx\", \"args\": [\"mcp-server-files\"]},\n    compensations={\n        \"create_file\": \"delete_file\",\n        \"write_file\": \"restore_file\",\n    }\n)\n</code></pre> <p>On failure, the Orchestrator will run the compensating MCP tool.</p>"},{"location":"mcp/#mcpclient-low-level","title":"MCPClient (Low-Level)","text":"<p>For direct MCP protocol access:</p> <pre><code>from agenthelm import MCPClient\n\nclient = MCPClient({\"command\": \"uvx\", \"args\": [\"mcp-server-time\"]})\nawait client.connect()\n\n# List available tools\ntools = await client.list_tools()\n\n# Call a tool\nresult = await client.call_tool(\"get_time\", {\"timezone\": \"UTC\"})\n\nawait client.close()\n</code></pre>"},{"location":"mcp/#example-file-operations-agent","title":"Example: File Operations Agent","text":"<pre><code>adapter = MCPToolAdapter(\n    server_config={\"command\": \"uvx\", \"args\": [\"mcp-server-filesystem\", \".\"]},\n    compensations={\"write_file\": \"delete_file\"}\n)\nawait adapter.connect()\n\nagent = ToolAgent(\n    name=\"file_agent\",\n    lm=lm,\n    tools=adapter.get_tools(),\n    role=\"You are a file management assistant.\"\n)\n\nresult = agent.run(\"Create a new file called notes.txt with 'Hello World'\")\n</code></pre>"},{"location":"mcp/#api-reference","title":"API Reference","text":"<p>options: show_source: false</p> <p>options: show_source: false</p>"},{"location":"mcp/#agenthelm.MCPToolAdapter","title":"MCPToolAdapter","text":"<pre><code>MCPToolAdapter(server_config, compensations=None)\n</code></pre> <p>Wraps MCP server tools as AgentHelm-compatible callables.</p> Example <p>adapter = MCPToolAdapter({\"command\": \"uvx\", \"args\": [\"mcp-server-time\"]}) await adapter.connect() tools = adapter.get_tools()</p> Source code in <code>agenthelm/mcp/adapter.py</code> <pre><code>def __init__(\n    self,\n    server_config: dict,\n    compensations: dict[str, str] | None = None,\n):\n    self._client = MCPClient(server_config)\n    self._tools: list[dict] = []\n    self._compensations = compensations or {}\n</code></pre>"},{"location":"mcp/#agenthelm.MCPToolAdapter-functions","title":"Functions","text":""},{"location":"mcp/#agenthelm.MCPToolAdapter.close","title":"close  <code>async</code>","text":"<pre><code>close()\n</code></pre> Source code in <code>agenthelm/mcp/adapter.py</code> <pre><code>async def close(self):\n    await self._client.close()\n</code></pre>"},{"location":"mcp/#agenthelm.MCPToolAdapter.connect","title":"connect  <code>async</code>","text":"<pre><code>connect()\n</code></pre> <p>Connect and discover tools.</p> Source code in <code>agenthelm/mcp/adapter.py</code> <pre><code>async def connect(self):\n    \"\"\"Connect and discover tools.\"\"\"\n    await self._client.connect()\n    self._tools = await self._client.list_tools()\n</code></pre>"},{"location":"mcp/#agenthelm.MCPToolAdapter.get_tools","title":"get_tools","text":"<pre><code>get_tools()\n</code></pre> <p>Return MCP tools as callable functions.</p> <p>Registers each tool in TOOL_REGISTRY with compensation info.</p> Source code in <code>agenthelm/mcp/adapter.py</code> <pre><code>def get_tools(self) -&gt; list[Callable]:\n    \"\"\"\n    Return MCP tools as callable functions.\n\n    Registers each tool in TOOL_REGISTRY with compensation info.\n    \"\"\"\n    callables = []\n    for tool_info in self._tools:\n        name = tool_info[\"name\"]\n        description = tool_info.get(\"description\", \"MCP tool\")\n\n        # Create wrapper function\n        def make_tool_func(tool_name: str):\n            def tool_func(**kwargs) -&gt; Any:\n                \"\"\"Sync wrapper for async MCP call.\"\"\"\n                # Bridge async -&gt; sync for DSPy compatibility\n                loop = asyncio.get_event_loop()\n                if loop.is_running():\n                    # If already in async context, use run_coroutine_threadsafe\n\n                    future = asyncio.run_coroutine_threadsafe(\n                        self._client.call_tool(tool_name, kwargs), loop\n                    )\n                    return future.result(timeout=30)\n                else:\n                    return asyncio.run(self._client.call_tool(tool_name, kwargs))\n\n            return tool_func\n\n        func = make_tool_func(name)\n        func.__name__ = name\n        func.__doc__ = description\n\n        # Register in TOOL_REGISTRY with compensation\n        compensate = self._compensations.get(name)\n        TOOL_REGISTRY[name] = {\n            \"function\": func,\n            \"contract\": {\n                \"inputs\": self._extract_input_schema(tool_info),\n                \"outputs\": {\"result\": \"Any\"},\n                \"compensating_tool\": compensate,\n                \"tags\": [\"mcp\"],\n            },\n        }\n\n        callables.append(func)\n    return callables\n</code></pre>"},{"location":"mcp/#agenthelm.MCPClient","title":"MCPClient","text":"<pre><code>MCPClient(server_config)\n</code></pre> <p>Low-level MCP protocol client.</p> <p>server_config example:</p> Source code in <code>agenthelm/mcp/client.py</code> <pre><code>def __init__(self, server_config: dict):\n    \"\"\"\n    server_config example:\n    {\"command\": \"uvx\", \"args\": [\"mcp-server-time\"]}\n    \"\"\"\n    self.server_config = server_config\n</code></pre>"},{"location":"mcp/#agenthelm.MCPClient-attributes","title":"Attributes","text":""},{"location":"mcp/#agenthelm.MCPClient.server_config","title":"server_config  <code>instance-attribute</code>","text":"<pre><code>server_config = server_config\n</code></pre>"},{"location":"mcp/#agenthelm.MCPClient-functions","title":"Functions","text":""},{"location":"mcp/#agenthelm.MCPClient.call_tool","title":"call_tool  <code>async</code>","text":"<pre><code>call_tool(name, arguments)\n</code></pre> Source code in <code>agenthelm/mcp/client.py</code> <pre><code>async def call_tool(self, name: str, arguments: dict) -&gt; Any:\n    if not self._session:\n        raise RuntimeError(\"Not connected\")\n    result = await self._session.call_tool(name, arguments)\n    return result.content\n</code></pre>"},{"location":"mcp/#agenthelm.MCPClient.close","title":"close  <code>async</code>","text":"<pre><code>close()\n</code></pre> Source code in <code>agenthelm/mcp/client.py</code> <pre><code>async def close(self):\n    if self._session:\n        # Clean up resources\n        self._session = None\n</code></pre>"},{"location":"mcp/#agenthelm.MCPClient.connect","title":"connect  <code>async</code>","text":"<pre><code>connect()\n</code></pre> Source code in <code>agenthelm/mcp/client.py</code> <pre><code>async def connect(self):\n    params = StdioServerParameters(\n        command=self.server_config[\"command\"],\n        args=self.server_config.get(\"args\", []),\n        env=self.server_config.get(\"env\"),\n    )\n    # stdio_client is a context manager, but we need persistent connection\n    self._read, self._write = await stdio_client(params).__aenter__()\n    self._session = ClientSession(self._read, self._write)\n    await self._session.initialize()\n</code></pre>"},{"location":"mcp/#agenthelm.MCPClient.list_tools","title":"list_tools  <code>async</code>","text":"<pre><code>list_tools()\n</code></pre> Source code in <code>agenthelm/mcp/client.py</code> <pre><code>async def list_tools(self) -&gt; list[dict]:\n    if not self._session:\n        raise RuntimeError(\"Not connected\")\n    result = await self._session.list_tools()\n    return [tool.model_dump() for tool in result.tools]\n</code></pre>"},{"location":"memory/","title":"Memory Hub","text":"<p>AgentHelm's Memory Hub provides a pluggable memory system with an SDK-first design. Zero Docker required for basic usage.</p>"},{"location":"memory/#quick-start","title":"Quick Start","text":"<pre><code>from agenthelm import MemoryHub, MemoryContext\n\n# In-memory (default, ephemeral)\nhub = MemoryHub()\n\n# Short-term memory (key-value)\nawait hub.short_term.set(\"user:123:name\", \"Alice\", ttl=3600)\nname = await hub.short_term.get(\"user:123:name\")\n\n# Semantic memory (vector search)\nawait hub.semantic.store(\"User prefers dark mode.\", metadata={\"category\": \"preferences\"})\nresults = await hub.semantic.search(\"What are the user's UI preferences?\")\n</code></pre>"},{"location":"memory/#architecture","title":"Architecture","text":"<p>The Memory Hub offers three tiers, automatically selected based on configuration:</p> Tier Short-Term Semantic Use Case In-Memory <code>dict</code> + TTL Qdrant <code>:memory:</code> Development, testing Local File SQLite Qdrant local Single-node, no Docker Network Redis Qdrant server Production, scaling"},{"location":"memory/#configuration","title":"Configuration","text":""},{"location":"memory/#in-memory-default","title":"In-Memory (Default)","text":"<pre><code>hub = MemoryHub()  # Zero config, ephemeral\n</code></pre>"},{"location":"memory/#local-persistence","title":"Local Persistence","text":"<pre><code>hub = MemoryHub(data_dir=\"./data\")\n# Creates:\n#   ./data/short_term.db  (SQLite)\n#   ./data/qdrant/        (Qdrant local)\n</code></pre>"},{"location":"memory/#network-production","title":"Network (Production)","text":"<pre><code>hub = MemoryHub(\n    redis_url=\"redis://localhost:6379\",\n    qdrant_url=\"http://localhost:6333\"\n)\n</code></pre>"},{"location":"memory/#session-context","title":"Session Context","text":"<p>Use <code>MemoryContext</code> for session-scoped operations with automatic key namespacing:</p> <pre><code>async with MemoryContext(hub, session_id=\"user-123\") as ctx:\n    # Keys are automatically prefixed with session ID\n    await ctx.set(\"last_query\", \"What is AI?\")\n\n    # Store memories tagged with session\n    await ctx.store_memory(\"User asked about AI basics.\")\n\n    # Search within session or globally\n    results = await ctx.recall(\"AI questions\", session_only=True)\n\n# Session keys are cleaned up on exit (configurable)\n</code></pre>"},{"location":"memory/#short-term-memory-api","title":"Short-Term Memory API","text":"<p>options: show_source: false members: - get - set - delete - exists - keys</p>"},{"location":"memory/#agenthelm.memory.base.BaseShortTermMemory","title":"BaseShortTermMemory","text":"<p>               Bases: <code>ABC</code></p> <p>Abstract base class for short-term (key-value) memory.</p>"},{"location":"memory/#agenthelm.memory.base.BaseShortTermMemory-functions","title":"Functions","text":""},{"location":"memory/#agenthelm.memory.base.BaseShortTermMemory.close","title":"close  <code>async</code>","text":"<pre><code>close()\n</code></pre> <p>Close any connections. Override if needed.</p> Source code in <code>agenthelm/memory/base.py</code> <pre><code>async def close(self) -&gt; None:\n    \"\"\"Close any connections. Override if needed.\"\"\"\n    pass\n</code></pre>"},{"location":"memory/#agenthelm.memory.base.BaseShortTermMemory.delete","title":"delete  <code>abstractmethod</code> <code>async</code>","text":"<pre><code>delete(key)\n</code></pre> <p>Delete a key.</p> Source code in <code>agenthelm/memory/base.py</code> <pre><code>@abstractmethod\nasync def delete(self, key: str) -&gt; None:\n    \"\"\"Delete a key.\"\"\"\n    ...\n</code></pre>"},{"location":"memory/#agenthelm.memory.base.BaseShortTermMemory.exists","title":"exists  <code>abstractmethod</code> <code>async</code>","text":"<pre><code>exists(key)\n</code></pre> <p>Check if key exists and is not expired.</p> Source code in <code>agenthelm/memory/base.py</code> <pre><code>@abstractmethod\nasync def exists(self, key: str) -&gt; bool:\n    \"\"\"Check if key exists and is not expired.\"\"\"\n    ...\n</code></pre>"},{"location":"memory/#agenthelm.memory.base.BaseShortTermMemory.get","title":"get  <code>abstractmethod</code> <code>async</code>","text":"<pre><code>get(key)\n</code></pre> <p>Get a value by key. Returns None if not found or expired.</p> Source code in <code>agenthelm/memory/base.py</code> <pre><code>@abstractmethod\nasync def get(self, key: str) -&gt; Any | None:\n    \"\"\"Get a value by key. Returns None if not found or expired.\"\"\"\n    ...\n</code></pre>"},{"location":"memory/#agenthelm.memory.base.BaseShortTermMemory.get_many","title":"get_many  <code>async</code>","text":"<pre><code>get_many(keys)\n</code></pre> <p>Get multiple keys. Default implementation calls get() for each.</p> Source code in <code>agenthelm/memory/base.py</code> <pre><code>async def get_many(self, keys: list[str]) -&gt; dict[str, Any]:\n    \"\"\"Get multiple keys. Default implementation calls get() for each.\"\"\"\n    result = {}\n    for key in keys:\n        value = await self.get(key)\n        if value is not None:\n            result[key] = value\n    return result\n</code></pre>"},{"location":"memory/#agenthelm.memory.base.BaseShortTermMemory.set","title":"set  <code>abstractmethod</code> <code>async</code>","text":"<pre><code>set(key, value, ttl=3600)\n</code></pre> <p>Set a value with optional TTL in seconds.</p> Source code in <code>agenthelm/memory/base.py</code> <pre><code>@abstractmethod\nasync def set(self, key: str, value: Any, ttl: int = 3600) -&gt; None:\n    \"\"\"Set a value with optional TTL in seconds.\"\"\"\n    ...\n</code></pre>"},{"location":"memory/#semantic-memory-api","title":"Semantic Memory API","text":"<p>options: show_source: false members: - store - search - delete - store_many</p>"},{"location":"memory/#agenthelm.memory.base.BaseSemanticMemory","title":"BaseSemanticMemory","text":"<p>               Bases: <code>ABC</code></p> <p>Abstract base class for semantic (vector) memory.</p>"},{"location":"memory/#agenthelm.memory.base.BaseSemanticMemory-functions","title":"Functions","text":""},{"location":"memory/#agenthelm.memory.base.BaseSemanticMemory.close","title":"close  <code>async</code>","text":"<pre><code>close()\n</code></pre> <p>Close any connections. Override if needed.</p> Source code in <code>agenthelm/memory/base.py</code> <pre><code>async def close(self) -&gt; None:\n    \"\"\"Close any connections. Override if needed.\"\"\"\n    pass\n</code></pre>"},{"location":"memory/#agenthelm.memory.base.BaseSemanticMemory.delete","title":"delete  <code>abstractmethod</code> <code>async</code>","text":"<pre><code>delete(ids)\n</code></pre> <p>Delete entries by ID.</p> Source code in <code>agenthelm/memory/base.py</code> <pre><code>@abstractmethod\nasync def delete(self, ids: list[str]) -&gt; None:\n    \"\"\"Delete entries by ID.\"\"\"\n    ...\n</code></pre>"},{"location":"memory/#agenthelm.memory.base.BaseSemanticMemory.search","title":"search  <code>abstractmethod</code> <code>async</code>","text":"<pre><code>search(query, top_k=5, filter=None)\n</code></pre> <p>Search for similar texts. Returns ranked results.</p> Source code in <code>agenthelm/memory/base.py</code> <pre><code>@abstractmethod\nasync def search(\n    self,\n    query: str,\n    top_k: int = 5,\n    filter: dict[str, Any] | None = None,\n) -&gt; list[SearchResult]:\n    \"\"\"Search for similar texts. Returns ranked results.\"\"\"\n    ...\n</code></pre>"},{"location":"memory/#agenthelm.memory.base.BaseSemanticMemory.store","title":"store  <code>abstractmethod</code> <code>async</code>","text":"<pre><code>store(text, metadata=None, id=None)\n</code></pre> <p>Store text with optional metadata. Returns the ID.</p> Source code in <code>agenthelm/memory/base.py</code> <pre><code>@abstractmethod\nasync def store(\n    self,\n    text: str,\n    metadata: dict[str, Any] | None = None,\n    id: str | None = None,\n) -&gt; str:\n    \"\"\"Store text with optional metadata. Returns the ID.\"\"\"\n    ...\n</code></pre>"},{"location":"memory/#agenthelm.memory.base.BaseSemanticMemory.store_many","title":"store_many  <code>async</code>","text":"<pre><code>store_many(texts, metadatas=None)\n</code></pre> <p>Store multiple texts. Default implementation calls store() for each.</p> Source code in <code>agenthelm/memory/base.py</code> <pre><code>async def store_many(\n    self,\n    texts: list[str],\n    metadatas: list[dict[str, Any]] | None = None,\n) -&gt; list[str]:\n    \"\"\"Store multiple texts. Default implementation calls store() for each.\"\"\"\n    ids = []\n    for i, text in enumerate(texts):\n        meta = metadatas[i] if metadatas else None\n        id = await self.store(text, meta)\n        ids.append(id)\n    return ids\n</code></pre>"},{"location":"memory/#backend-selection","title":"Backend Selection","text":"<p>AgentHelm automatically selects the appropriate backend:</p> <pre><code># Explicit backend usage\nfrom agenthelm.memory import InMemoryShortTermMemory, SqliteShortTermMemory, SemanticMemory\n\n# In-memory short-term\nmemory = InMemoryShortTermMemory()\n\n# SQLite short-term\nmemory = SqliteShortTermMemory(db_path=\"./data/cache.db\")\n\n# Semantic with mode selection\nsemantic = SemanticMemory(mode=\"memory\")  # or \"local\" or \"network\"\n</code></pre>"},{"location":"observability/","title":"Observability &amp; Tracing","text":"<p>AgentHelm provides comprehensive observability through execution tracing, cost tracking, and OpenTelemetry integration.</p>"},{"location":"observability/#execution-tracing","title":"Execution Tracing","text":"<p>Every tool execution is automatically traced and stored:</p> <pre><code>from agenthelm import ExecutionTracer, ToolAgent\nfrom agenthelm.core.storage import SqliteStorage\n\n# Create tracer with storage\nstorage = SqliteStorage(\"traces.db\")\ntracer = ExecutionTracer(storage=storage)\n\n# Pass to agent\nagent = ToolAgent(\n    name=\"my_agent\",\n    lm=lm,\n    tools=[my_tool],\n    tracer=tracer,  # Traces saved automatically\n)\n</code></pre>"},{"location":"observability/#event-model","title":"Event Model","text":"<p>Each execution produces an <code>Event</code> with:</p> Field Description <code>timestamp</code> When the event occurred <code>tool_name</code> Name of the executed tool <code>inputs</code> / <code>outputs</code> Arguments and return value <code>execution_time</code> Duration in seconds <code>token_usage</code> LLM tokens (input/output) <code>estimated_cost_usd</code> Cost estimate <code>agent_name</code> Which agent executed this <code>trace_id</code> Unique execution ID"},{"location":"observability/#cli-trace-explorer","title":"CLI Trace Explorer","text":""},{"location":"observability/#list-traces","title":"List Traces","text":"<pre><code># List recent traces\nagenthelm traces list\n\n# Limit results\nagenthelm traces list -n 20\n</code></pre>"},{"location":"observability/#show-trace-details","title":"Show Trace Details","text":"<pre><code>agenthelm traces show 0\n</code></pre>"},{"location":"observability/#filter-traces","title":"Filter Traces","text":"<pre><code># By tool name\nagenthelm traces filter --tool get_weather\n\n# By status\nagenthelm traces filter --status success\nagenthelm traces filter --status failed\n\n# By date range\nagenthelm traces filter --date-from 2024-01-01 --date-to 2024-12-31\n\n# By execution time\nagenthelm traces filter --min-time 1.0 --max-time 5.0\n\n# Output as JSON\nagenthelm traces filter --status failed --json\n</code></pre>"},{"location":"observability/#export-traces","title":"Export Traces","text":"<pre><code># Export to JSON\nagenthelm traces export -o traces.json -f json\n\n# Export to CSV\nagenthelm traces export -o traces.csv -f csv\n\n# Export to Markdown report\nagenthelm traces export -o report.md -f md\n\n# Export filtered traces\nagenthelm traces export -o failed.md -f md --status failed\n</code></pre>"},{"location":"observability/#storage-backends","title":"Storage Backends","text":""},{"location":"observability/#sqlite-default","title":"SQLite (Default)","text":"<pre><code># Traces saved to ~/.agenthelm/traces.db by default\nagenthelm run \"task\"\n\n# Custom path\nagenthelm run \"task\" -s ./my_traces.db\n</code></pre>"},{"location":"observability/#json","title":"JSON","text":"<pre><code>agenthelm run \"task\" -s ./traces.json\n</code></pre>"},{"location":"observability/#configure-default-storage","title":"Configure Default Storage","text":"<pre><code>agenthelm config set trace_storage /path/to/traces.db\n</code></pre>"},{"location":"observability/#opentelemetry-jaeger","title":"OpenTelemetry &amp; Jaeger","text":"<p>AgentHelm supports OpenTelemetry for distributed tracing with Jaeger.</p>"},{"location":"observability/#setup-jaeger","title":"Setup Jaeger","text":"<pre><code>docker run -d --name jaeger \\\n  -p 16686:16686 \\\n  -p 4317:4317 \\\n  jaegertracing/all-in-one:latest\n</code></pre>"},{"location":"observability/#enable-tracing","title":"Enable Tracing","text":"<pre><code># Run with OpenTelemetry tracing\nagenthelm run \"What is 2+2?\" --trace\n\n# Custom endpoint\nagenthelm run \"task\" --trace --trace-endpoint http://localhost:4317\n</code></pre>"},{"location":"observability/#view-in-jaeger-ui","title":"View in Jaeger UI","text":"<p>Open http://localhost:16686 and select \"agenthelm-cli\" service.</p>"},{"location":"observability/#python-sdk","title":"Python SDK","text":"<pre><code>from agenthelm.tracing import init_tracing, trace_tool, trace_agent\n\n# Initialize OpenTelemetry\ninit_tracing(\n    service_name=\"my-app\",\n    otlp_endpoint=\"http://localhost:4317\",\n    enabled=True,\n)\n\n# Trace a tool execution\nwith trace_tool(\"search\", inputs={\"query\": \"AI news\"}) as span:\n    result = search(\"AI news\")\n    span.set_attribute(\"result_count\", len(result))\n\n# Trace an agent execution\nwith trace_agent(\"researcher\", task=\"Find AI news\") as span:\n    result = agent.run(\"Find AI news\")\n</code></pre>"},{"location":"observability/#verbose-logging","title":"Verbose Logging","text":"<p>Enable debug logging with the <code>-v</code> flag:</p> <pre><code>agenthelm -v run \"task\"\nagenthelm -v traces list\n</code></pre>"},{"location":"observability/#cost-tracking","title":"Cost Tracking","text":"<p>Track token usage and estimated costs:</p> <pre><code>from agenthelm import CostTracker, get_cost_tracker\n\n# Get tracker\ntracker = get_cost_tracker()\n\n# Record usage\ntracker.record(\"mistral-large-latest\", input_tokens=500, output_tokens=150)\n\n# Get summary\nsummary = tracker.get_summary()\nprint(f\"Total cost: ${summary['total_cost_usd']:.4f}\")\n</code></pre> <p>The CLI shows cost summary after each run:</p> <pre><code>\u2500\u2500\u2500 Summary \u2500\u2500\u2500\nTokens: 1,234 (856 in / 378 out)\nCost: $0.0042\nTraces: 3 events saved\n</code></pre>"},{"location":"orchestration/","title":"Orchestration","text":"<p>AgentHelm's orchestration layer executes plans by routing steps to registered agents.</p>"},{"location":"orchestration/#quick-start","title":"Quick Start","text":"<pre><code>import asyncio\nfrom agenthelm import (\n    AgentRegistry, Orchestrator, PlannerAgent, ToolAgent, tool\n)\nimport dspy\n\nlm = dspy.LM(\"mistral/mistral-large-latest\")\n\n# Define tools\n@tool()\ndef search(query: str) -&gt; str:\n    \"\"\"Search for information.\"\"\"\n    return f\"Results for: {query}\"\n\n@tool()\ndef write(content: str) -&gt; str:\n    \"\"\"Write content to file.\"\"\"\n    return f\"Wrote: {content}\"\n\n# Create and register agents\nregistry = AgentRegistry()\nregistry.register(ToolAgent(name=\"researcher\", lm=lm, tools=[search]))\nregistry.register(ToolAgent(name=\"writer\", lm=lm, tools=[write]))\n\n# Generate a plan\nplanner = PlannerAgent(name=\"planner\", lm=lm, tools=[search, write])\nplan = planner.plan(\"Research AI trends and write a summary\")\n\n# Review and approve\nprint(plan.to_yaml())\nplan.approved = True\n\n# Execute\norchestrator = Orchestrator(registry)\nresult = asyncio.run(orchestrator.execute(plan))\nprint(result.answer)\n</code></pre>"},{"location":"orchestration/#agentregistry","title":"AgentRegistry","text":"<p>Container for named agents that can be looked up during orchestration.</p> <pre><code>from agenthelm import AgentRegistry\n\nregistry = AgentRegistry()\n\n# Register agents\nregistry.register(researcher_agent)  # Uses agent.name as key\nregistry.register(writer_agent)\n\n# Lookup\nagent = registry[\"researcher\"]\nagent = registry.get(\"researcher\")  # Returns None if not found\n\n# Check membership\nif \"researcher\" in registry:\n    ...\n\n# Iterate\nfor name in registry:\n    print(name)\n\n# Properties\nregistry.names  # [\"researcher\", \"writer\"]\nlen(registry)   # 2\n\n# Management\nregistry.unregister(\"researcher\")\nregistry.clear()\n</code></pre>"},{"location":"orchestration/#orchestrator","title":"Orchestrator","text":"<p>Executes approved plans by routing steps to agents.</p> <pre><code>from agenthelm import Orchestrator\n\norchestrator = Orchestrator(\n    registry=registry,\n    default_agent=fallback_agent  # Optional: for steps without agent_name\n)\n\n# Execute a plan (async)\nresult = await orchestrator.execute(plan)\n</code></pre>"},{"location":"orchestration/#execution-flow","title":"Execution Flow","text":"<pre><code>Plan.get_ready_steps()\n        \u2502\n        \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Parallel Batch   \u2502  Steps with no pending dependencies\n\u2502  (asyncio.gather) \u2502  run concurrently\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n        \u2502\n        \u25bc\n   Mark completed\n        \u2502\n        \u25bc\n   Next batch...\n        \u2502\n        \u25bc\n    AgentResult\n</code></pre>"},{"location":"orchestration/#parallel-execution","title":"Parallel Execution","text":"<p>Steps without dependencies run in parallel:</p> <pre><code>plan = Plan(\n    goal=\"Research and summarize\",\n    approved=True,\n    steps=[\n        PlanStep(id=\"a\", agent_name=\"researcher\", description=\"Search topic A\"),\n        PlanStep(id=\"b\", agent_name=\"researcher\", description=\"Search topic B\"),\n        PlanStep(id=\"c\", agent_name=\"writer\", description=\"Combine results\",\n                 depends_on=[\"a\", \"b\"]),  # Waits for a and b\n    ]\n)\n\n# Steps a and b run in parallel\n# Step c runs after both complete\n</code></pre>"},{"location":"orchestration/#error-handling","title":"Error Handling","text":"<p>Failed steps are marked and tracked:</p> <pre><code>result = await orchestrator.execute(plan)\n\nif not result.success:\n    failed = [s for s in plan.steps if s.status == StepStatus.FAILED]\n    for step in failed:\n        print(f\"Step {step.id} failed: {step.error}\")\n</code></pre>"},{"location":"orchestration/#plan-approval-flow","title":"Plan Approval Flow","text":"<p>Plans must be approved before execution:</p> <pre><code># Generate plan\nplan = planner.plan(\"Do something complex\")\n\n# Review (CLI or programmatic)\nprint(plan.to_yaml())\n\n# Approve\nplan.approved = True\n\n# Execute\nresult = await orchestrator.execute(plan)\n</code></pre>"},{"location":"orchestration/#cli-approval-week-5","title":"CLI Approval (Week 5)","text":"<pre><code>$ agenthelm plan \"Research AI trends\" --approve\n</code></pre>"},{"location":"orchestration/#default-agent","title":"Default Agent","text":"<p>For steps without <code>agent_name</code>, a default agent can be used:</p> <pre><code>default = ToolAgent(name=\"default\", lm=lm, tools=[...])\norchestrator = Orchestrator(registry, default_agent=default)\n\n# This step uses default_agent\nPlanStep(id=\"step_1\", tool_name=\"search\", description=\"...\")\n</code></pre>"},{"location":"orchestration/#saga-pattern-rollback-on-failure","title":"Saga Pattern (Rollback on Failure)","text":"<p>AgentHelm supports the Saga pattern for compensating actions when steps fail.</p>"},{"location":"orchestration/#how-it-works","title":"How It Works","text":"<ol> <li>Steps execute normally</li> <li>If a step fails, rollback runs for completed steps in reverse order</li> <li>Each completed step's compensating action is called</li> </ol>"},{"location":"orchestration/#defining-compensating-actions","title":"Defining Compensating Actions","text":"<p>Option 1: Per-Tool (default)</p> <pre><code>@tool(compensating_tool=\"delete_file\")\ndef create_file(path: str) -&gt; str:\n    \"\"\"Create a file. Rollback: delete it.\"\"\"\n    ...\n</code></pre> <p>Option 2: Per-Step (override)</p> <pre><code>PlanStep(\n    id=\"step_1\",\n    tool_name=\"create_file\",\n    args={\"path\": \"/tmp/data.txt\"},\n    compensate_tool=\"archive_file\",  # Overrides tool default\n    compensate_args={\"path\": \"/tmp/data.txt\"},\n)\n</code></pre>"},{"location":"orchestration/#enabling-rollback","title":"Enabling Rollback","text":"<pre><code># Rollback enabled by default\norchestrator = Orchestrator(registry, enable_rollback=True)\n\n# Disable if needed\norchestrator = Orchestrator(registry, enable_rollback=False)\n</code></pre>"},{"location":"orchestration/#example","title":"Example","text":"<pre><code>plan = Plan(\n    goal=\"Create and send report\",\n    approved=True,\n    steps=[\n        PlanStep(\n            id=\"create\",\n            agent_name=\"writer\",\n            tool_name=\"create_report\",\n            description=\"Create report file\",\n            compensate_tool=\"delete_report\",  # Rollback action\n        ),\n        PlanStep(\n            id=\"send\",\n            agent_name=\"sender\",\n            tool_name=\"send_email\",\n            description=\"Send report via email\",\n            depends_on=[\"create\"],\n        ),\n    ],\n)\n\n# If \"send\" fails, \"create\" is rolled back via delete_report\nresult = await orchestrator.execute(plan)\n</code></pre>"},{"location":"orchestration/#api-reference","title":"API Reference","text":"<p>options: show_source: false</p> <p>options: show_source: false</p>"},{"location":"orchestration/#agenthelm.AgentRegistry","title":"AgentRegistry","text":"<pre><code>AgentRegistry()\n</code></pre> <p>Registry for named agents.</p> <p>Allows registering and looking up agents by name for orchestration.</p> Example <p>registry = AgentRegistry() registry.register(researcher_agent) registry.register(writer_agent)</p> <p>agent = registry[\"researcher\"] agent.run(\"Find information about...\")</p> Source code in <code>agenthelm/orchestration/registry.py</code> <pre><code>def __init__(self):\n    self._agents: dict[str, BaseAgent] = {}\n</code></pre>"},{"location":"orchestration/#agenthelm.AgentRegistry-attributes","title":"Attributes","text":""},{"location":"orchestration/#agenthelm.AgentRegistry.names","title":"names  <code>property</code>","text":"<pre><code>names\n</code></pre> <p>List of all registered agent names.</p>"},{"location":"orchestration/#agenthelm.AgentRegistry-functions","title":"Functions","text":""},{"location":"orchestration/#agenthelm.AgentRegistry.__contains__","title":"__contains__","text":"<pre><code>__contains__(name)\n</code></pre> <p>Check if an agent is registered.</p> Source code in <code>agenthelm/orchestration/registry.py</code> <pre><code>def __contains__(self, name: str) -&gt; bool:\n    \"\"\"Check if an agent is registered.\"\"\"\n    return name in self._agents\n</code></pre>"},{"location":"orchestration/#agenthelm.AgentRegistry.__getitem__","title":"__getitem__","text":"<pre><code>__getitem__(name)\n</code></pre> <p>Get an agent by name, raises KeyError if not found.</p> Source code in <code>agenthelm/orchestration/registry.py</code> <pre><code>def __getitem__(self, name: str) -&gt; BaseAgent:\n    \"\"\"Get an agent by name, raises KeyError if not found.\"\"\"\n    if name not in self._agents:\n        raise KeyError(f\"Agent '{name}' not found in registry\")\n    return self._agents[name]\n</code></pre>"},{"location":"orchestration/#agenthelm.AgentRegistry.__iter__","title":"__iter__","text":"<pre><code>__iter__()\n</code></pre> <p>Iterate over agent names.</p> Source code in <code>agenthelm/orchestration/registry.py</code> <pre><code>def __iter__(self) -&gt; Iterator[str]:\n    \"\"\"Iterate over agent names.\"\"\"\n    return iter(self._agents)\n</code></pre>"},{"location":"orchestration/#agenthelm.AgentRegistry.__len__","title":"__len__","text":"<pre><code>__len__()\n</code></pre> <p>Number of registered agents.</p> Source code in <code>agenthelm/orchestration/registry.py</code> <pre><code>def __len__(self) -&gt; int:\n    \"\"\"Number of registered agents.\"\"\"\n    return len(self._agents)\n</code></pre>"},{"location":"orchestration/#agenthelm.AgentRegistry.clear","title":"clear","text":"<pre><code>clear()\n</code></pre> <p>Remove all agents from registry.</p> Source code in <code>agenthelm/orchestration/registry.py</code> <pre><code>def clear(self) -&gt; None:\n    \"\"\"Remove all agents from registry.\"\"\"\n    self._agents.clear()\n</code></pre>"},{"location":"orchestration/#agenthelm.AgentRegistry.get","title":"get","text":"<pre><code>get(name)\n</code></pre> <p>Get an agent by name, returns None if not found.</p> Source code in <code>agenthelm/orchestration/registry.py</code> <pre><code>def get(self, name: str) -&gt; BaseAgent | None:\n    \"\"\"Get an agent by name, returns None if not found.\"\"\"\n    return self._agents.get(name)\n</code></pre>"},{"location":"orchestration/#agenthelm.AgentRegistry.register","title":"register","text":"<pre><code>register(agent)\n</code></pre> <p>Register an agent by its name.</p> <p>Parameters:</p> Name Type Description Default <code>agent</code> <code>BaseAgent</code> <p>Agent to register (uses agent.name as key)</p> required <p>Raises:</p> Type Description <code>ValueError</code> <p>If agent with same name already registered</p> Source code in <code>agenthelm/orchestration/registry.py</code> <pre><code>def register(self, agent: BaseAgent) -&gt; None:\n    \"\"\"\n    Register an agent by its name.\n\n    Args:\n        agent: Agent to register (uses agent.name as key)\n\n    Raises:\n        ValueError: If agent with same name already registered\n    \"\"\"\n    if agent.name in self._agents:\n        raise ValueError(f\"Agent '{agent.name}' already registered\")\n    self._agents[agent.name] = agent\n</code></pre>"},{"location":"orchestration/#agenthelm.AgentRegistry.unregister","title":"unregister","text":"<pre><code>unregister(name)\n</code></pre> <p>Remove an agent from the registry.</p> <p>Parameters:</p> Name Type Description Default <code>name</code> <code>str</code> <p>Name of agent to remove</p> required <p>Returns:</p> Type Description <code>BaseAgent | None</code> <p>The removed agent, or None if not found</p> Source code in <code>agenthelm/orchestration/registry.py</code> <pre><code>def unregister(self, name: str) -&gt; BaseAgent | None:\n    \"\"\"\n    Remove an agent from the registry.\n\n    Args:\n        name: Name of agent to remove\n\n    Returns:\n        The removed agent, or None if not found\n    \"\"\"\n    return self._agents.pop(name, None)\n</code></pre>"},{"location":"orchestration/#agenthelm.Orchestrator","title":"Orchestrator","text":"<pre><code>Orchestrator(\n    registry, default_agent=None, enable_rollback=True\n)\n</code></pre> <p>Executes plans by routing steps to registered agents.</p> <p>Supports: - Sequential execution (steps with dependencies) - Parallel execution (independent steps) - Saga pattern: rollback on failure via compensating actions - Error handling and step failure tracking</p> Example <p>registry = AgentRegistry() registry.register(researcher) registry.register(writer)</p> <p>orchestrator = Orchestrator(registry) result = await orchestrator.execute(plan)</p> <p>Initialize orchestrator.</p> <p>Parameters:</p> Name Type Description Default <code>registry</code> <code>AgentRegistry</code> <p>Registry of named agents</p> required <code>default_agent</code> <code>BaseAgent | None</code> <p>Fallback agent for steps without agent_name</p> <code>None</code> <code>enable_rollback</code> <code>bool</code> <p>If True, run compensating actions on failure</p> <code>True</code> Source code in <code>agenthelm/orchestration/orchestrator.py</code> <pre><code>def __init__(\n    self,\n    registry: AgentRegistry,\n    default_agent: BaseAgent | None = None,\n    enable_rollback: bool = True,\n):\n    \"\"\"\n    Initialize orchestrator.\n\n    Args:\n        registry: Registry of named agents\n        default_agent: Fallback agent for steps without agent_name\n        enable_rollback: If True, run compensating actions on failure\n    \"\"\"\n    self.registry = registry\n    self.default_agent = default_agent\n    self.enable_rollback = enable_rollback\n</code></pre>"},{"location":"orchestration/#agenthelm.Orchestrator-attributes","title":"Attributes","text":""},{"location":"orchestration/#agenthelm.Orchestrator.default_agent","title":"default_agent  <code>instance-attribute</code>","text":"<pre><code>default_agent = default_agent\n</code></pre>"},{"location":"orchestration/#agenthelm.Orchestrator.enable_rollback","title":"enable_rollback  <code>instance-attribute</code>","text":"<pre><code>enable_rollback = enable_rollback\n</code></pre>"},{"location":"orchestration/#agenthelm.Orchestrator.registry","title":"registry  <code>instance-attribute</code>","text":"<pre><code>registry = registry\n</code></pre>"},{"location":"orchestration/#agenthelm.Orchestrator-functions","title":"Functions","text":""},{"location":"orchestration/#agenthelm.Orchestrator.execute","title":"execute  <code>async</code>","text":"<pre><code>execute(plan)\n</code></pre> <p>Execute a plan by routing steps to agents.</p> <p>On failure, if enable_rollback is True, runs compensating actions for completed steps in reverse order (Saga pattern).</p> <p>Parameters:</p> Name Type Description Default <code>plan</code> <code>Plan</code> <p>The plan to execute</p> required <p>Returns:</p> Type Description <code>AgentResult</code> <p>AgentResult with aggregated events and metrics</p> Source code in <code>agenthelm/orchestration/orchestrator.py</code> <pre><code>async def execute(self, plan: Plan) -&gt; AgentResult:\n    \"\"\"\n    Execute a plan by routing steps to agents.\n\n    On failure, if enable_rollback is True, runs compensating actions\n    for completed steps in reverse order (Saga pattern).\n\n    Args:\n        plan: The plan to execute\n\n    Returns:\n        AgentResult with aggregated events and metrics\n    \"\"\"\n    if not plan.approved:\n        raise ValueError(\"Plan must be approved before execution\")\n\n    result = AgentResult(success=False)\n    all_events: list[Event] = []\n    failed = False\n\n    while not plan.is_complete:\n        ready_steps = plan.get_ready_steps()\n\n        if not ready_steps:\n            # No steps ready but plan not complete - deadlock\n            result.error = \"Plan execution deadlock: no steps ready\"\n            failed = True\n            break\n\n        # Execute ready steps in parallel\n        step_results = await asyncio.gather(\n            *[self._execute_step(step) for step in ready_steps],\n            return_exceptions=True,\n        )\n\n        # Process results\n        for step, step_result in zip(ready_steps, step_results):\n            if isinstance(step_result, Exception):\n                plan.mark_failed(step.id, str(step_result))\n                failed = True\n            else:\n                output, events = step_result\n                plan.mark_completed(step.id, result=output)\n                all_events.extend(events)\n\n        # On first failure, break and rollback\n        if failed:\n            break\n\n    # Saga: rollback completed steps on failure\n    if failed and self.enable_rollback:\n        rollback_events = await self._rollback(plan)\n        all_events.extend(rollback_events)\n\n    # Build final result\n    result.success = plan.success\n    for event in all_events:\n        result.add_event(event)\n\n    if not result.success and not result.error:\n        failed_steps = [s for s in plan.steps if s.status == StepStatus.FAILED]\n        if failed_steps:\n            result.error = f\"Steps failed: {[s.id for s in failed_steps]}\"\n\n    return result\n</code></pre>"},{"location":"quickstart/","title":"Quick Start","text":"<p>Get up and running with AgentHelm in 5 minutes.</p>"},{"location":"quickstart/#installation","title":"Installation","text":"<pre><code>pip install agenthelm\n</code></pre>"},{"location":"quickstart/#1-initialize-configuration","title":"1. Initialize Configuration","text":"<pre><code>agenthelm init\n</code></pre> <p>This creates <code>~/.agenthelm/config.yaml</code> with default settings.</p>"},{"location":"quickstart/#2-set-your-api-key","title":"2. Set Your API Key","text":"<pre><code># Set via config\nagenthelm config set api_keys.mistral your-api-key\n\n# Or use environment variable\nexport MISTRAL_API_KEY=\"your-api-key\"\n</code></pre>"},{"location":"quickstart/#3-run-your-first-task","title":"3. Run Your First Task","text":"<pre><code>agenthelm run \"What is the capital of France?\"\n</code></pre> <p>Output:</p> <pre><code>Running task: What is the capital of France?\nModel: mistral/mistral-large-latest, Max iterations: 10\n\n\u2713 Success\nParis is the capital of France.\n\n\u2500\u2500\u2500 Summary \u2500\u2500\u2500\nTokens: 156 (120 in / 36 out)\n</code></pre>"},{"location":"quickstart/#4-try-interactive-chat","title":"4. Try Interactive Chat","text":"<pre><code>agenthelm chat\n</code></pre> <pre><code>AgentHelm Chat (model: mistral/mistral-large-latest)\nType 'exit' or 'quit' to end the session\n\n&gt; Explain quantum computing in simple terms\nQuantum computing uses quantum bits (qubits) that can exist in multiple \nstates simultaneously, allowing quantum computers to process many \npossibilities at once...\n\n&gt; exit\n</code></pre>"},{"location":"quickstart/#5-create-and-execute-plans","title":"5. Create and Execute Plans","text":"<pre><code># Generate a plan\nagenthelm plan \"Build a todo app with Flask\" -o plan.yaml\n\n# Execute the plan\nagenthelm execute plan.yaml\n</code></pre>"},{"location":"quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>CLI Reference - All commands and options</li> <li>Agents - ToolAgent and PlannerAgent</li> <li>Orchestration - Multi-agent workflows</li> <li>MCP Integration - Connect to MCP servers</li> </ul>"},{"location":"quickstart/#python-sdk","title":"Python SDK","text":"<pre><code>import dspy\nfrom agenthelm import ToolAgent, tool\n\n# Define a tool\n@tool()\ndef add(a: int, b: int) -&gt; int:\n    \"\"\"Add two numbers.\"\"\"\n    return a + b\n\n# Create and run agent\nlm = dspy.LM(\"mistral/mistral-large-latest\")\nagent = ToolAgent(name=\"calculator\", lm=lm, tools=[add])\nresult = agent.run(\"What is 2 + 2?\")\n\nprint(result.answer)  # \"4\"\n</code></pre>"},{"location":"tutorial/","title":"Tutorial: Building Your First Agent","text":"<p>This tutorial guides you through building a simple agent using AgentHelm.</p>"},{"location":"tutorial/#1-setup","title":"1. Setup","text":"<pre><code>pip install agenthelm\nagenthelm init\n</code></pre> <p>Set your API key:</p> <pre><code>export MISTRAL_API_KEY=\"your_key_here\"\n# or\nagenthelm config set api_keys.mistral your_key_here\n</code></pre>"},{"location":"tutorial/#2-define-your-tools","title":"2. Define Your Tools","text":"<p>Create a file named <code>my_tools.py</code>:</p> <pre><code># my_tools.py\nfrom agenthelm import tool\n\n@tool()\ndef get_weather(city: str) -&gt; str:\n    \"\"\"Gets the current weather for a given city.\"\"\"\n    if city == \"New York\":\n        return \"It is 24\u00b0C and sunny in New York.\"\n    elif city == \"London\":\n        return \"It is 15\u00b0C and cloudy in London.\"\n    return f\"Weather data not available for {city}.\"\n\n@tool(requires_approval=True)\ndef send_email(recipient: str, subject: str, body: str) -&gt; dict:\n    \"\"\"Sends an email to a specified recipient.\"\"\"\n    print(f\"Sending email to {recipient}\")\n    return {\"status\": \"sent\", \"recipient\": recipient}\n</code></pre>"},{"location":"tutorial/#3-run-your-agent","title":"3. Run Your Agent","text":""},{"location":"tutorial/#simple-task","title":"Simple Task","text":"<pre><code>agenthelm run \"What is the weather in London?\" \\\n  --tools my_tools:get_weather\n</code></pre>"},{"location":"tutorial/#interactive-mode","title":"Interactive Mode","text":"<pre><code>agenthelm chat --tools my_tools:get_weather,send_email\n</code></pre>"},{"location":"tutorial/#task-requiring-approval","title":"Task Requiring Approval","text":"<pre><code>agenthelm run \"Send an email to user@example.com\" \\\n  --tools my_tools:send_email\n</code></pre> <p>The agent will pause and ask for your approval.</p>"},{"location":"tutorial/#4-view-traces","title":"4. View Traces","text":"<p>After running, view your execution traces:</p> <pre><code># List recent traces\nagenthelm traces list\n\n# Show trace details\nagenthelm traces show 0\n\n# Filter by tool\nagenthelm traces filter --tool get_weather\n\n# Export to Markdown\nagenthelm traces export -o report.md -f md\n</code></pre>"},{"location":"tutorial/#5-using-the-python-sdk","title":"5. Using the Python SDK","text":"<pre><code>import dspy\nfrom agenthelm import ToolAgent, tool\n\n\n@tool()\ndef add(a: int, b: int) -&gt; int:\n    \"\"\"Add two numbers.\"\"\"\n    return a + b\n\n\n@tool()\ndef multiply(a: int, b: int) -&gt; int:\n    \"\"\"Multiply two numbers.\"\"\"\n    return a * b\n\n\n# Create agent with tools\nlm = dspy.LM(\"mistral/mistral-large-latest\")\nagent = ToolAgent(\n    name=\"calculator\",\n    lm=lm,\n    tools=[add, multiply],\n    max_iters=5,\n)\n\n# Run task\nresult = agent.run(\"What is 3 + 4, then multiply by 2?\")\n\nif result.success:\n    print(f\"Answer: {result.answer}\")\n    print(f\"Tokens: {result.token_usage.input_tokens + result.token_usage.output_tokens}\")\nelse:\n    print(f\"Error: {result.error}\")\n</code></pre>"},{"location":"tutorial/#6-generate-and-execute-plans","title":"6. Generate and Execute Plans","text":"<pre><code># Generate a plan\nagenthelm plan \"Build a calculator that can add and multiply\" -o plan.yaml\n\n# Review the plan file, then execute\nagenthelm execute plan.yaml\n</code></pre>"},{"location":"tutorial/#next-steps","title":"Next Steps","text":"<ul> <li>CLI Reference - All commands and options</li> <li>Core Concepts - Architecture deep dive</li> <li>Orchestration - Multi-agent workflows</li> </ul>"}]}